<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css" rel="stylesheet">
    <title id="title_pomo">Pomodoro Control</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <script data-ad-client="ca-pub-6725653721190993" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <link rel="shortcut icon" href="pomodoro3.png">
</head>
<body>
    <div class="header">
       <div class="logo">
        POMODORO <span id="verde">CONTROL</span>
       </div> 
        <ul class="menu">
           <li id='about1'>About</li>
           <li><a class="donate" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=DUBTUQ27BXTPQ&source=url" target="blank">Donate</a></li>
           <li class="settings">Settings</li>    
       </ul>

    <audio src="sound1.mpeg" id="audio1"></audio>
    <audio src="sound2.mpeg" id="audio2"></audio>
    <audio src="sound3.mpeg" id="audio3"></audio>
    <audio src="sound4.mpeg" id="audio4"></audio>
    
    </div>
    <div class="video">
        <img class="imagem" src="Pomodoro.png">
    </div>
    <div class="cronometro">
        <button onclick=pomodoro(); class="botao" id="pomodoro">Pomodoro</button>
        <button onclick=shortbreak(); class="botao" id="short">Short Break</button>
        <button onclick=longbreak(); class="botao" id="long">Long Break</button>
        <h1 id="counter">25:00</h1>
        <button onclick=start(); class="botao" id="start">Start</button>
        <button onclick=stop(); class="botao" id="stop">Pause</button>
        <button onclick=reset1(); class="botao" id="reset">Reset</button>
        <br><input id="autostart" type="checkbox" value="check"> Auto start pomodoros and breaks
    </div>

    <div class="tasks">
        <h1 id="tasks">Tasks</h1>
        <form action='#'>
        <input class="todastasks" id="task01" name="task01" type="text" placeholder="Tasks 01">
        <input id="check_01" type="checkbox" value="check"> 
        <br><input class="todastasks" id="task02" name="task02" type="text" placeholder="Tasks 02">
        <input id="check_02" type="checkbox" value="check"> 
        <br><input class="todastasks" id="task03" name="task03" type="text" placeholder="Tasks 03">
        <input id="check_03" type="checkbox" value="check"> 
        <br><input class="todastasks" id="task04" name="task04" type="text" placeholder="Tasks 04">
        <input id="check_04" type="checkbox" value="check"> 
        <br><input class="todastasks" id="task05" name="task05" type="text" placeholder="Tasks 05">
        <input id="check_05" type="checkbox" value="check"> 
        <br><input class="todastasks" id="task06" name="task06" type="text" placeholder="Tasks 06">
        <input id="check_06" type="checkbox" value="check"> 
        <br><input class="todastasks" id="task07" name="task07" type="text" placeholder="Tasks 07">
        <input id="check_07" type="checkbox" value="check"> 
        <br><input class="todastasks" id="task08" name="task08" type="text" placeholder="Tasks 08">
        <input id="check_08" type="checkbox" value="check"> 
        <br><input class="todastasks" id="task09" name="task09" type="text" placeholder="Tasks 09">
        <input id="check_09" type="checkbox" value="check"> 
        <br><input class="todastasks" id="task10" name="task10" type="text" placeholder="Tasks 10">
        <input id="check_010" type="checkbox" value="check"><br> 
        <br><button id="resettasks" type="reset">Reset</button>     
        </form>

    </div>
    <div class="about">
        <a href="#" id="foo"></a>
        <p id="titulo">Pomodoro Technique</p>
            
            <p>Created in the 80's by the Italian Francesco Cirillo, the Pomodoro technique is widely used by those who need and like to manage time, 
                in order to better organize their activities and increase their efficiency and productivity. This method consists of dividing tasks and 
                activities into blocks of 25 minutes of uninterrupted time (without any pauses or distractions at all!), making the person create an 
                increase in concentration, focus and agility in the execution of pendencies. After the block is closed, there is an interval of 5 minutes 
                (short break) or 10 minutes (long break).</p>
            <br>
           <p>To “oxygenate the brain” and increase its efficiency, after 4 consecutive “pomodoros”, an interval of 15 to 30 minutes should be performed.

        </p>
        <br>
            <p>Tip:</p>
                <p>1.	Select an activity of your choice;</p>
                <p>2.	Dedicate yourself to this activity for 25 minutes without stopping;</p>
                <p>3.	Take a 5-minute break;</p>
                <p>4.	Start another “pomodoro” (25-minute block + 5-minute break);</p>
                <p> 5.	After 4 "pomodoros" in a row, perform an interval greater than 15 to 30 minutes;</p>
                <p> 6.	Start another “pomodoro” cycle until the selected activities are over.</p>
            <br>
          <p>  *This is the standard technique suggested by the classic method, however you can adjust the times according to your understanding and ideal balance (use the <i>Settings</i> tab to adjust).</p>
        </p>
        </div>
        <footer>
            Copyright © 2020 Colizzeu WebDev - All rights reserved. 
        </footer>
        <!–-  Html do popup do setting -->
        <div id="modal-settings" class="modal-container">
            <div id="modal-master" class="modal">
                <button id="fechar" class="fechar">x</button>
                <div class="modalmais">
                <h3 id="fontesettings"> Settings</h3>
                <form id='sounds'>
                    <h3>Select Sound</h3>
                    <input type="radio" class="input" name="a1" value="a" id="sound1"> Sound 01
                    <input type="radio" class="input" name="a1" value="b" id="sound2"> Sound 02
                    <input type="radio" class="input" name="a1" value="c" id="sound3"> Sound 03
                    <input type="radio" class="input" name="a1" value="d" id="sound4"> Sound 04
                </form>   

                <form id='volumes'>
                    <h3>Select Volume</h3>
                    <input type="radio" class="input" name="a2" value=0 id="mute"> Mute
                    <input type="radio" class="input" name="a2" value=0.25 id="vol025"> 25%
                    <input type="radio" class="input" name="a2" value=0.5 id="vol050"> 50%
                    <input type="radio" class="input" name="a2" value=0.75 id="vol075"> 75%
                    <input type="radio" class="input" name="a2" value=1 id="vol100"> 100%<br>
                    <br><input type="button" class="button" value="Test Sound" id="test_sound">
                </form>
                <br>
                         <form>
                    <h3>Set Custom Times</h3>
                        Pomodoro (in minutes)
                        <br><input id="input1" type="number" class="input"><br>
                        <br>Short Break (in minutes)
                        <br><input id="input2" type="number" class="input"><br>
                        <br>Long Break (in minutes)   
                        <br><input id="input3" type="number" class="input">
                 
                </form>
                
                <div class="botoesmodal">
                <input id="botao1" type="button" class="button" value="Save">
                <input id="botao2" type="reset" class="button" value="Reset">
        
            </div>    
            </div>
            </div>
        </div>

<script>

    "use strict"

    var min = 25;
    var seg = 0;

    var pomodoro_setup_number = 0
    var shortbreak_setup_number = 0
    var longbreak_setup_number = 0

    //Função que calcula o tempo de acordo com o settings, ou continua com o mesmo tempo padrão
    function calc_time() {
        var pomodoro_setup = document.getElementById('input1')
        var shortbreak_setup = document.getElementById('input2')
        var longbreak_setup = document.getElementById('input3')

        pomodoro_setup_number = Number(pomodoro_setup.value)
        shortbreak_setup_number = Number(shortbreak_setup.value)
        longbreak_setup_number = Number(longbreak_setup.value)

        if(shortbreak_setup_number<=0){
            min = 5;
            seg = 0;
            shortbreak()
        } else {
            min = shortbreak_setup_number
            seg = 0
            shortbreak()
        }

        if(longbreak_setup_number<=0){
            min = 15;
            seg = 0;
            longbreak()
        } else {
            min = longbreak_setup_number
            seg = 0
            longbreak()
        }

        if(pomodoro_setup_number<=0){
            min = 25;
            seg = 0;
            pomodoro()
        } else {
            min = pomodoro_setup_number
            seg = 0
            pomodoro()
        }
    }

    //Botão para salvar o settings do tempo 
    const button_1 = document.getElementById('botao1')
    button_1.addEventListener('click', function () {
        calc_time()
        document.getElementById('fechar').click() = true
    })

    //Botão para reset do tempo
    const button_3 = document.getElementById('botao2')
    button_3.addEventListener('click', function() {
        document.getElementById('input1').value = 0;
        document.getElementById('input2').value = 0;
        document.getElementById('input3').value = 0;
        calc_time()
        document.getElementById('sounds').reset();
        document.getElementById('volumes').reset();
    })

    var count = 0;
    var contador = 0;

    //Chama o botão pomodoro, que estabelece os 25 minutos
    function pomodoro() {
        if(pomodoro_setup_number<=0){
            min = 25;
            seg = 0;
        } else {
            min = pomodoro_setup_number
            seg = 0
        }

        document.getElementById('counter').innerHTML = min + ':00'
        stop()
        count = 0
    }

    //Chama o botão short break, que estabelece um descanso de 5 min.
    function shortbreak() {
        if(shortbreak_setup_number<=0){
            min = 5;
            seg = 0;
        } else {
            min = shortbreak_setup_number
            seg = 0
        }

        document.getElementById('counter').innerHTML = min + ':00'
        stop()
        count = 1
    }

    //Chama o botão longbreak, que estabelece um descanso de 15 min
    function longbreak() {
        if(longbreak_setup_number<=0){
            min = 15;
            seg = 0;
        } else {
            min = longbreak_setup_number
            seg = 0
        }

        document.getElementById('counter').innerHTML = min + ':00'
        stop()
        count = 2
    }

    var tempo = 1000; //Quantos milésimos equivalem a 1 segundo?
    var cron = 0

    //Começa a rodar o contador
    function start() {
        cron = setInterval(() => {timer();}, tempo);

        document.getElementById ('start').disabled = true;
        document.getElementById ('stop').disabled = false;
    }

    //Para o contador no tempo q está e permanece
    function stop() {
        clearInterval(cron);

        document.getElementById ('start').disabled = false;
    }

    //Reset do contador para o botão de atividade selecionado, pomodor, shortbreak e longbreak
    function reset1() {
        clearInterval(cron);

        document.getElementById ('start').disabled = false;
        
        min = 25;
        seg = 0;

        document.getElementById('title_pomo').innerHTML = 'Pomodoro Control'

        if(count == 0) {
            pomodoro()
        }
        
        if(count == 1) {
            shortbreak()
        }

        if(count == 2) {
            longbreak()
        }
    }

    //Timer e contador girando, bem como o formato.
    function timer() {
        seg-=1;
        if(seg == -1){
            seg = 59
            min-=1;
        }
        var format = (min < 10 ? '0' + min : min) + ':' + (seg < 10 ? '0' + seg : seg);
        document.getElementById('counter').innerHTML = format
        document.getElementById('title_pomo').innerHTML = 'Pomodoro Control - ' + format;

        if(min == 0 && seg == 0){
            stop()
            
            if(musica[0].checked || musica[1].checked || musica[2].checked || musica[3].checked) {
                valida_settings()
            } else {
                const audio = document.getElementById('audio4')
                audio.volume = 0.5
                audio.play()
                setTimeout(() => {audio.pause();}, 5000)
            }

            document.getElementById ('start').disabled = true;
            document.getElementById ('stop').disabled = true;

            //Automatização do botão autostart
            if(document.getElementById('autostart').checked == true && seg == 0) {
                if (count == 0 && contador == 0){
                shortbreak()
                start()
                contador = 5}
                else if (count == 1 || count == 2){
                    pomodoro()
                    var tempo_1 = 50
                    setTimeout(() => {start();}, tempo_1)}
                else if (count == 0 && contador == 5){
                    longbreak()
                    var tempo_1 = 50
                    setTimeout(() => {start();}, tempo_1)
                    contador = 0}
            } else {
                //Alerta quando sem o auto start
                if(seg == 0) {            
                    function alerta() {
                        alert("The time is finished! Let's start a new cycle.")
                        pomodoro()
                        document.getElementById('title_pomo').innerHTML = 'Pomodoro Control'
                    } 
                    var tempo_1 = 50
                    setTimeout(() => {alerta();}, tempo_1)
                }
            }
        }
    }

    //Função para Abrir e Fechar a tela de Settings
    function iniciaModal(modalID) {
        const modal = document.getElementById(modalID);
        modal.classList.add('mostrarmodal');
        modal.addEventListener('click', (e) => {
            if(e.target.className == 'fechar') {
                modal.classList.remove('mostrarmodal');
            }
        });
        }

        const settings = document.querySelector('.settings');
        settings.addEventListener('click', () => iniciaModal('modal-settings'));

    //Tasks check:
    document.getElementById('check_01').onclick = function () {
        if(document.getElementById('check_01').checked == true){
            document.getElementById('task01').disabled = true  
        } else {
            document.getElementById('task01').disabled = false
        }
    }
    document.getElementById('check_02').onclick = function () {
        if(document.getElementById('check_02').checked == true){
            document.getElementById('task02').disabled = true  
        } else {
            document.getElementById('task02').disabled = false
        }
    }
    document.getElementById('check_03').onclick = function () {
        if(document.getElementById('check_03').checked == true){
            document.getElementById('task03').disabled = true  
        } else {
            document.getElementById('task03').disabled = false
        }
    }
    document.getElementById('check_04').onclick = function () {
        if(document.getElementById('check_04').checked == true){
            document.getElementById('task04').disabled = true  
        } else {
            document.getElementById('task04').disabled = false
        }
    }   
    document.getElementById('check_05').onclick = function () {
        if(document.getElementById('check_05').checked == true){
            document.getElementById('task05').disabled = true  
        } else {
            document.getElementById('task05').disabled = false
        }
    }
    document.getElementById('check_06').onclick = function () {
        if(document.getElementById('check_06').checked == true){
            document.getElementById('task06').disabled = true  
        } else {
            document.getElementById('task06').disabled = false
        }
    }
    document.getElementById('check_07').onclick = function () {
        if(document.getElementById('check_07').checked == true){
            document.getElementById('task07').disabled = true  
        } else {
            document.getElementById('task07').disabled = false
        }
    }
    document.getElementById('check_08').onclick = function () {
        if(document.getElementById('check_08').checked == true){
            document.getElementById('task08').disabled = true  
        } else {
            document.getElementById('task08').disabled = false
        }
    }
    document.getElementById('check_09').onclick = function () {
        if(document.getElementById('check_09').checked == true){
            document.getElementById('task09').disabled = true  
        } else {
            document.getElementById('task09').disabled = false
        }
    }
    document.getElementById('check_010').onclick = function () {
        if(document.getElementById('check_010').checked == true){
            document.getElementById('task10').disabled = true  
        } else {
            document.getElementById('task10').disabled = false
        }
    }

    //Destrava todos os campos após o reset do das tasks.
    document.getElementById('resettasks').onclick = function () {
        document.getElementById('task01').disabled = false
        document.getElementById('task02').disabled = false
        document.getElementById('task03').disabled = false
        document.getElementById('task04').disabled = false
        document.getElementById('task05').disabled = false
        document.getElementById('task06').disabled = false
        document.getElementById('task07').disabled = false
        document.getElementById('task08').disabled = false
        document.getElementById('task09').disabled = false
        document.getElementById('task10').disabled = false
    }

    //Importando valores dos campos type Radio, como tipo de musica e volume

    var musica = document.getElementsByName("a1");
    var volumetotal = document.getElementsByName("a2")

    //Função que valida o volume e a música
    function valida_settings(){
        //Validação do volume
        if (volumetotal[0].checked){
            var vol = volumetotal[0].value;
        } else if (volumetotal[1].checked){
            var vol = volumetotal[1].value;
        } else if (volumetotal[2].checked){
            var vol = volumetotal[2].value;
        } else if (volumetotal[3].checked){
            var vol = volumetotal[3].value;
        } else if (volumetotal[4].checked){
            var vol = volumetotal[4].value;
        }

        var tempo_2 = 5000 //Tempo que a música demora para dar o pause

        //Validação da musica
        if (musica[0].checked) {
            const audio = document.getElementById('audio1')
            audio.volume = vol
            audio.play()
            setTimeout(() => {audio.pause();}, tempo_2)
        } else if (musica[1].checked){
            const audio = document.getElementById('audio2')
            audio.volume = vol
            audio.play()
            setTimeout(() => {audio.pause();}, tempo_2)
        } else if (musica[2].checked) {
            const audio = document.getElementById('audio3')
            audio.volume = vol
            audio.play()
            setTimeout(() => {audio.pause();}, tempo_2)
        } else if (musica[3].checked) {
            const audio = document.getElementById('audio4')
            audio.volume = vol
            audio.play()
            setTimeout(() => {audio.pause();}, tempo_2)
    }}

    //Botão para o test sound
    const button = document.getElementById('test_sound')
    button.addEventListener('click', function(){
        valida_settings()
    })

    //Botão que vai para o about
    const button_2 = document.getElementById('about1')
    button_2.addEventListener('click', function() {
        window.location.href='#foo';
    })

</script>
</body>
</html>